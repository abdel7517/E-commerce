{% extends "admin/baseAdmin.html.twig" %}
{% block lib %}
	<link rel="stylesheet" href="{{asset('lib/vanilla-calendar/css/vanilla-calendar-min.css')}}">
	<script src="{{asset('lib/vanilla-calendar/js/vanilla-calendar-min.js')}}"></script>
{% endblock %}
{% block banniere %}
{% endblock %}
{% block content %}

	<br>
	<section class="order">
		<div id="myCalendar" class="vanilla-calendar"></div>
		<p>
			<a href=" {{ path('admin_index', { 'date': 'all'}) }} ">
				Voir toutes mes commandes
			</a>
		</p>

		{% if orders|length > 0  %}

			{% set i = 1 %}
			{% for order in orders %}
				<div class='history'>
					<p>
						Commande n°
						{{ i }}
						datant du
						{{ order.date|date("d/m/Y") }}
					</p>
					<table>
						<th>
							code de commande
						</th>
						<th>
							email
						</th>
						<th>
							nom
						</th>
						<th>
							n° de rue
						</th>
						<th>
							voie
						</th>
						<th>
							code postal
						</th>
						<th>
							pays
						</th>
						<th>
							récup.
						</th>

						<tbody>
							<tr>
								<td>
									{{ order.orderCode }}
								</td>
								<td>
									{{ order.user.email }}
								</td>
								<td>
									{{ order.name}}
								</td>
								<td>
									{{order.numberAdress}}
								</td>
								<td>
									{{order.nameAdress}}
								</td>
								<td>
									{{order.postalCode}}
								</td>
								<td>
									{{order.country}}
								</td>
								<td>
									{{order.expedition}}
								</td>
							</tr>
							{% if order.expedition == 'livraison' %}
								<tr>
									<td>
										Livraison
									</td>
									<td>
										90€
									</td>
									<td>
										1
									</td>
									<td>
										90€
									</td>
								</tr>
							{% endif %}
						</tbody>
					</table>
					<table>
						<th>
							Produit(reference)
						</th>
						<th>
							Prix
						</th>
						<th>
							Quantité
						</th>
						<th>
							Total
						</th>
						<tbody>
						{% set total = 0 %}
							{% for cart in order.cart %}
								<tr>

									<td>
										{{ cart.product.reference}}
									</td>
									<td>
										{{cart.product.price}}
									</td>
									<td>
										{{cart.quantity}}
									</td>
									<td>
										{{cart.quantity * cart.product.price}}
									</td>
									{% set total =  (cart.quantity * cart.product.price) + total %}
								</tr>
							{% endfor %}
						</tbody>
						<tfoot class='foot-facture'>
							<td colspan="3" class="text-right border-none" scope="row">
								Total :
							</td>
							<td>
								<span id="total">
									{{ total }}
								</span>
								€
							</td>
						</tfoot>
					</table>
				</div>
				{% set i = i + 1 %}
				<br>
			{% endfor %}
		{% else %}
			<p>
				Aucune commande le
				{{ date|date("d/m/Y") }}
				: (
			</p>
		{% endif %}
	</section>
	{% block js %}

		<script src=" {{ asset('main.js') }} "></script>
	{% endblock %}
{% endblock %}
